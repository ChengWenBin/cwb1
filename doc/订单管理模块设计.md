# 订单管理模块设计

## 1. 功能描述

订单管理模块主要实现对系统订单的管理，重点是订单状态管理和订单详情查看功能。主要功能包括：

- 订单状态管理：支持订单状态流转（待发货、已发货、已完成）和订单取消
- 订单详情查看：支持查看订单基本信息、商品信息、收货信息等
- 订单列表查询：支持按订单号、用户ID、订单状态等条件查询

## 2. 详细设计

### (1) 功能组件表

订单管理功能组件表如表 1 所示。

表 1 订单管理功能组件表

| 功能层次 | 类或页面 | 方法或请求 | 说明 |
| --- | --- | --- | --- |
| View | adminOrder.vue | handleOrderStatus() | 处理订单状态变更 |
| Controller | OrderController | updateOrderStatus() | 更新订单状态 |
| Service | OrderService | updateStatus() | 订单状态业务处理 |
| Mapper | OrderMapper | updateOrder() | 数据库操作 |
| Domain | Order | get/set | 订单实体类 |

### (2) 类的调用时序模型

订单状态管理时序模型如图 1 所示。

```
+--------+    +--------+    +--------+    +--------+    +--------+    +--------+
|        |    |        |    |        |    |        |    |        |    |        |
| 管理员  |    |adminorder   |    |Order   |    |Order   |    |Order   |    |Order   |
|        |    |.vue    |    |Control.|    |Service |    |Mapper  |    |        |
+--------+    +--------+    +--------+    +--------+    +--------+    +--------+
    |             |             |             |             |             |
    | 访问         |             |             |             |             |
    |------------>|             |             |             |             |
    |             |             |             |             |             |
    |             | handleStatus|             |             |             |
    |             |------------>|             |             |             |
    |             |             |             |             |             |
    |             |             | updateStatus|             |             |
    |             |             |------------>|             |             |
    |             |             |             |             |             |
    |             |             |             | update      |             |
    |             |             |             |------------>|             |
    |             |             |             |             |             |
    |             |             |             |             | get/set     |
    |             |             |             |             |------------>|
    |             |             |             |             |             |
    |             |             |             |             |<------------|
    |             |             |             |             | return      |
    |             |             |             |<------------| return      |
    |             |             |             | return      |             |
    |             |             |<------------| return      |             |
    |             |             | return      |             |             |
    |             |<------------| return      |             |             |
    |             | return      |             |             |             |
    |<------------| return      |             |             |             |
    |             |             |             |             |             |
```

### (3) 执行流程描述

1. 订单状态管理流程
   - 点击状态变更按钮，打开状态变更对话框
   - 选择目标状态（待发货、已发货、已完成）
   - 调用 handleOrderStatus() 函数处理状态数据
   - 调用 updateOrderStatus() 接口保存状态数据
   - 调用 updateOrder() 方法更新数据库
   - 保存成功后刷新列表

2. 订单详情查看流程
   - 点击查看按钮，打开订单详情对话框
   - 显示订单基本信息（订单号、创建时间、状态等）
   - 显示商品信息（商品名称、数量、价格等）
   - 显示收货信息（收货人、地址、联系方式等）