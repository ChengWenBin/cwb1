# 信息管理模块设计

## 1. 功能描述

信息管理模块主要实现对用户个人信息的管理，包括个人资料的查看和修改。主要功能包括：

- 个人信息查看：支持查看用户基本信息，如用户名、昵称、邮箱等
- 个人信息修改：支持修改用户基本信息，包括昵称、邮箱、手机号等
- 密码修改：支持用户修改登录密码，需要验证原密码

## 2. 详细设计

### (1) 功能组件表

信息管理功能组件表如表 1 所示。

表 1 信息管理功能组件表

| 功能层次 | 类或页面 | 方法或请求 | 说明 |
| --- | --- | --- | --- |
| View | profile.vue | handleUserInfo() | 处理用户信息修改 |
| Controller | ProfileController | updateUserInfo() | 更新用户信息 |
| Service | UserService | updateProfile() | 用户信息业务处理 |
| Mapper | UserMapper | updateUser() | 数据库操作 |
| Domain | User | get/set | 用户实体类 |

### (2) 类的调用时序模型

用户信息管理时序模型如图 1 所示。

```
+--------+    +--------+    +--------+    +--------+    +--------+    +--------+
|        |    |        |    |        |    |        |    |        |    |        |
| 用户    |    |profile |    |Profile |    |User    |    |User    |    |User    |
|        |    |.vue    |    |Control.|    |Service |    |Mapper  |    |        |
+--------+    +--------+    +--------+    +--------+    +--------+    +--------+
    |             |             |             |             |             |
    | 访问         |             |             |             |             |
    |------------>|             |             |             |             |
    |             |             |             |             |             |
    |             | handleInfo  |             |             |             |
    |             |------------>|             |             |             |
    |             |             |             |             |             |
    |             |             | updateInfo  |             |             |
    |             |             |------------>|             |             |
    |             |             |             |             |             |
    |             |             |             | update      |             |
    |             |             |             |------------>|             |
    |             |             |             |             |             |
    |             |             |             |             | get/set     |
    |             |             |             |             |------------>|
    |             |             |             |             |             |
    |             |             |             |             |<------------|
    |             |             |             |             | return      |
    |             |             |             |<------------| return      |
    |             |             |             | return      |             |
    |             |             |<------------| return      |             |
    |             |             | return      |             |             |
    |             |<------------| return      |             |             |
    |             | return      |             |             |             |
    |<------------| return      |             |             |             |
    |             |             |             |             |             |
```

### (3) 执行流程描述

1. 个人信息修改流程
   - 点击修改按钮，打开信息修改对话框
   - 填写需要修改的信息（昵称、邮箱等）
   - 调用 handleUserInfo() 函数处理表单数据
   - 调用 updateUserInfo() 接口保存修改数据
   - 调用 updateUser() 方法更新数据库
   - 保存成功后刷新个人信息

2. 密码修改流程
   - 点击修改密码按钮，打开密码修改对话框
   - 输入原密码和新密码
   - 验证原密码是否正确
   - 调用密码修改接口更新密码
   - 更新成功后提示用户重新登录